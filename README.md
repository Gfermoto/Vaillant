# Vaillant
Vaillant eloBLOCK &amp; atmoTEC **(ebusd)**

__*(Что бы общаться с котлом требуются некоторые приготовления)*__  
- Для соединения с котлом и обмена через EBUS нужен преобразователь. Лучший вариант: https://adapter.ebusd.eu/v5-c6/index.en.html  
Так же рекомендую сразу приобрести преобразователь USR-ES1, это снизит задежки и джиттер, синхронизация и аудит будут стабильней. 
- Нужно поднять демон EBUSD *(в Docker или как дополнение в HASSio)*  
https://github.com/john30/ebusd  
https://github.com/LukasGrebe/ha-addons  
Для работы с кастомными файлами настроек, нужно сделать локальную копию конфигурационных фалов и прописать пути к ним.  
https://github.com/john30/ebusd-configuration
- Нужно поднять сервер MQTT *(в Docker или как дополнение в HASSio)*  
Вероятно он у вас уже есть.
- Дальнейшую работу выполнит MQTT-Discovery

**В файле mqtt-hassio.cfg содержатся два изменения:**
1) Закоментирован фильтр сообщений  
`(filter-name)`
2) Добавлено отслеживание записываемых сообщений  
`(filter-direction = r|u|^w)`  
*(Это позволяет получать больше информации)*  
  
**В файле 08.bai.csv добавлены строки:**  
`[PROD='0010023658']!load,bai.0010023658.inc,,,` *(Vaillant eloBLOCK)*  
`[PROD='0010015251']!load,bai.0010015251.inc,,,` *(Vaillant atmoTEC)* 
  
**Файл bai.0010023658.inc создан благодаря слиянию файлов bai.0010008045.inc и bai.308523.inc:**  
В полученом файле закоментированы строки d.xx относящиеся к функциям не доступным в Vaillant eloBLOCK.  
  
**Файл bai.0010015251.inc создан благодаря слиянию файлов bai.0010004121.inc и bai.308523.inc:**  
В полученом файле закоментированы строки d.xx относящиеся к функциям не доступным в Vaillant atmoTEC.  

Кофиг bai.308523.inc является файлом по умолчанию, если котел не распознан *(содержит общие сообщения, но не все)*.    
Второй конфигурационный файл выбирался на основе схожести аппаратных версий плат управления **(HW)**.  
Закоментированные не поддерживаемые функции d.xx сопряжены с версией програмного обеспечения платы **(SW)**.  
